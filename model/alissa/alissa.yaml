#//////////////////////////////////////////////////////////////////////////////
# FILE: alissa.yaml
# AUTHOR: David Ruvolo
# CREATED: 2023-01-26
# MODIFIED: 2023-01-26
# PURPOSE: EMX Package for Alissa Data
# STATUS: in.progress
# COMMENTS: NA
#//////////////////////////////////////////////////////////////////////////////

name: alissa
label: Alissa Interpret
description: Information for interacting with the Alissa Interpret API and variant exports
date: 2023-02-07
version: 0.9.2

defaults:
  dataType: string
  visible: true
  nillable: true
  
entities:

  # @name alissa_patients
  # @description this table will serve as the main 'controller' for the Alissa
  #   scripts. This table will generate the necessary information for interacting
  #   with the API.
  - name: patients
    label: Patient Information
    description: Information about patients in Alissa
    attributes:
      - name: umcgNr
        idAttribute: true
        auto: true
        nillable: false
        lookupAttribute: true
      - name: familieNr
      - name: alissaInternalID
      - name: accessionNr
      - name: dateFirstRun
      - name: dateLastUpdated
      - name: status
        dataType: compound
      - name: hasError
        dataType: bool
        partOfAttribute: status
      - name: errorType
        partOfAttribute: status
      - name: errorMessage
        partOfAttribute: status
      - name: comments
        dataType: text
        partOfAttribute: status
  
  - name: variantexports
    label: Variant Exports
    description: Export of variants information from Alissa
    attributes: 
      - name: analysisReference
        description: identifier of an analysis
      - name: umcgNr
      - name: gene
      - name: chromosome
      - name: start
      - name: stop
      - name: reference
      - name: genotype
      - name: type
      - name: transcript
      - name: cdna
      - name: location
      - name: protein
      - name: targetPanelNames
        description: attached to analysisReference
      - name: exon
      - name: effect
      - name: allele1
      - name: allele2
      - name: _gnomAD_allele_frequency_all_gnomAD_alleleFrequencyAll
      - name: _HGMD_accession_number_hgmdAccession
      - name: _HGMD_Confidence_hgmdConfidence
      - name: _HGMD_Disease_hgmdDisease
        dataType: text
      - name:  _HGMD_Variant_type_hgmdVariantType

      - name: accessionNumber
        description: the displayed patient identifier in Alissa. This is a string formated like so familyNr_UmcgNr.
      - name: dateRetrieved
        description: Date the variant information was retrieved
        dataType: date
      - name: alleleInScope
      - name: zygosity
      - name: classification
      - name: classificationTreeLabels
      - name: databaseReferences_dbSNP
      - name: _ClinVar_Id_clinVarId
      - name: _HGMD_PubMed_reference_hgmdPMID
      - name: _HGVS_genomic_level_nomenclature_fullGNomen
      - name: _HGVS_protein_level_nomenclature_fullPNomen
      - name: customFields
        dataType: text
      - name: readDepth
      - name: allele1Frequency
      - name: allele2Frequency
      - name: allelicDepth1
      - name: allelicDepth2
      - name: chromosomeType
      - name: geneProfileReport
        dataType: text
      
      - name: _id
        description: auto generated row identifier
        idAttribute: true
        auto: true
        nillable: false
        lookupAttribute: true
        tags: NCIT_C25364 http://purl.obolibrary.org/obo/NCIT_C25364
        
      # api information
      - name: api
        dataType: compound
      - name: patientId
        description: Alissa's internal identifier for a patient
        partOfAttribute: api
      - name: analysisId
        description: Alissa's internal identifier for an analysis
        partOfAttribute: api
      - name: dateFirstRun
        partOfAttribute: api
      - name: dateLastUpdated
        partOfAttribute: api
      - name: hasError
        dataType: bool
        partOfAttribute: api
      - name: errorType
        partOfAttribute: api
      - name: errorMessage
        partOfAttribute: api
      - name: comments
        dataType: text
        partOfAttribute: api
